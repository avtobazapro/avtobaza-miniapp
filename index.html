<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ê–≤—Ç–æ–ë–∞–∑–∞.PRO ‚Äî –ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä / –∑–∞–ø—á–∞—Å—Ç–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Telegram WebApp JS -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --bg: #f3f4f6;
      --shell-bg: #ffffff;
      --border-soft: rgba(148, 163, 184, 0.5);
      --border-input: rgba(148, 163, 184, 0.7);
      --text-main: #0f172a;
      --text-soft: #6b7280;
      --accent: #2aabee;
      --error: #b91c1c;
      --radius-xl: 24px;
      --shadow-soft: 0 20px 50px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, system-ui,
        "SF Pro Text", "SF Pro Display", "Segoe UI", sans-serif;
    }

    body {
      min-height: 100vh;
      background: var(--bg);
      color: var(--text-main);
      padding: 18px 12px 24px;
      display: flex;
      justify-content: center;
    }

    .shell {
      width: 100%;
      max-width: 580px;
      backdrop-filter: blur(12px);
      background: var(--shell-bg);
      border-radius: 28px;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 18px 16px 18px;
    }

    @media (min-width: 768px) {
      .shell {
        padding: 24px 24px 24px;
        margin-top: 20px;
      }
    }

    .header {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 14px;
    }

    .brand-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .logo-word {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .logo-main {
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      font-size: 13px;
      color: var(--accent);
    }

    .logo-sub {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.18em;
      color: var(--text-soft);
    }

    .status-pill {
      padding: 4px 10px;
      font-size: 11px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      color: var(--text-soft);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      background: #f9fafb;
      white-space: nowrap;
    }

    .status-pill-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25);
    }

    .tagline {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.5;
    }

    .tabs {
      display: flex;
      margin-top: 12px;
      margin-bottom: 10px;
      background: #f3f4f6;
      border-radius: 999px;
      padding: 3px;
      border: 1px solid rgba(209, 213, 219, 0.9);
    }

    .tab {
      flex: 1 1 0;
      border: none;
      background: transparent;
      border-radius: 999px;
      padding: 7px 10px;
      font-size: 13px;
      cursor: pointer;
      color: var(--text-soft);
      transition: 0.16s ease;
    }

    .tab.active {
      background: #ffffff;
      color: var(--text-main);
      box-shadow: 0 4px 12px rgba(15, 23, 42, 0.12);
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .tab-panel {
      display: none;
      flex-direction: column;
      gap: 10px;
      margin-top: 6px;
    }

    .tab-panel.active {
      display: flex;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    label {
      font-size: 12px;
      color: var(--text-soft);
    }

    input[type="text"],
    textarea {
      width: 100%;
      border-radius: 999px;
      border: 1px solid var(--border-input);
      padding: 8px 12px;
      font-size: 13px;
      outline: none;
      background: #f9fafb;
      color: var(--text-main);
      transition: border-color 0.15s ease, background-color 0.15s ease;
    }

    textarea {
      border-radius: 16px;
      resize: vertical;
      min-height: 70px;
    }

    input:focus,
    textarea:focus {
      border-color: var(--accent);
      background: #ffffff;
    }

    .two-cols {
      display: flex;
      gap: 8px;
    }

    .two-cols .field-group {
      flex: 1 1 0;
    }

    .fuel-options {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .fuel-chip {
      padding: 6px 10px;
      font-size: 12px;
      border-radius: 999px;
      border: 1px solid var(--border-input);
      background: #f9fafb;
      color: var(--text-soft);
      cursor: pointer;
      transition: 0.15s ease;
    }

    .fuel-chip.active {
      border-color: var(--accent);
      background: #e0f2fe;
      color: var(--text-main);
    }

    .hint {
      font-size: 11px;
      color: var(--text-soft);
    }

    .btn {
      margin-top: 10px;
      border: none;
      border-radius: 999px;
      padding: 10px 12px;
      font-size: 13px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      background: #000000;
      color: #f9fafb;
      box-shadow: 0 10px 22px rgba(0, 0, 0, 0.35);
      width: 100%;
      transition: transform 0.08s ease, box-shadow 0.08s ease;
    }

    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.45);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.4);
    }

    .form-message {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-soft);
      white-space: pre-line;
    }

    .form-message.error {
      color: var(--error);
    }

    .footnote {
      margin-top: 14px;
      font-size: 11px;
      color: var(--text-soft);
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <div class="shell">
    <header class="header">
      <div class="brand-row">
        <div class="logo-word">
          <div class="logo-main">–ê–≤—Ç–æ–ë–∞–∑–∞.PRO</div>
          <div class="logo-sub">Korea ¬∑ Premium</div>
        </div>
        <div class="status-pill">
          <span class="status-pill-dot"></span>
          –ú–∏–Ω–∏-–∞–Ω–∫–µ—Ç–∞
        </div>
      </div>
      <p class="tagline">
        –ó–∞–∫–∞–∑–∞—Ç—å –∞–≤—Ç–æ –∏–∑ –Æ–∂–Ω–æ–π –ö–æ—Ä–µ–∏ | –ö–∏—Ç–∞—è | –ï–≤—Ä–æ–ø—ã  
        –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É: –ü–æ–¥–±–æ—Ä –ê–≤—Ç–æ –∏–ª–∏ –ê–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–µ–π.
      </p>
    </header>

    <main>
      <div class="tabs">
        <button class="tab active" data-tab="car">–ü–æ–¥–±–æ—Ä –∞–≤—Ç–æ</button>
        <button class="tab" data-tab="parts">–ê–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–∏</button>
      </div>

      <form id="leadForm">
        <!-- –í–∫–ª–∞–¥–∫–∞: –ü–æ–¥–±–æ—Ä –∞–≤—Ç–æ (–≤—Å—ë –ù–ï–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ) -->
        <div class="tab-panel active" id="tab-car">
          <div class="field-group">
            <label for="carBrand">
              –ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å
            </label>
            <input
              type="text"
              id="carBrand"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Genesis GV80, Kia Carnival, BMW 520i"
            />
          </div>

          <div class="two-cols">
            <div class="field-group">
              <label for="carYear">
                –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞ (–æ—Ç / –¥–æ)
              </label>
              <input
                type="text"
                id="carYear"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –æ—Ç 2020 –∏–ª–∏ 2021‚Äì2023"
              />
            </div>
            <div class="field-group">
              <label for="carMileage">
                –ü—Ä–æ–±–µ–≥, –∫–º
              </label>
              <input
                type="text"
                id="carMileage"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥–æ 80 000 –∫–º"
              />
            </div>
          </div>

          <div class="field-group">
            <label>–¢–æ–ø–ª–∏–≤–æ</label>
            <div class="fuel-options" id="fuelOptions">
              <button type="button" class="fuel-chip active" data-fuel="–î–∏–∑–µ–ª—å">
                –î–∏–∑–µ–ª—å
              </button>
              <button type="button" class="fuel-chip" data-fuel="–ë–µ–Ω–∑–∏–Ω">
                –ë–µ–Ω–∑–∏–Ω
              </button>
              <button type="button" class="fuel-chip" data-fuel="–ì–∏–±—Ä–∏–¥">
                –ì–∏–±—Ä–∏–¥
              </button>
              <button type="button" class="fuel-chip" data-fuel="–≠–ª–µ–∫—Ç—Ä–∏—á–∫–∞">
                –≠–ª–µ–∫—Ç—Ä–∏—á–∫–∞
              </button>
              <button type="button" class="fuel-chip" data-fuel="–ì–∞–∑">
                –ì–∞–∑
              </button>
            </div>
          </div>

          <div class="two-cols">
            <div class="field-group">
              <label for="carRegion">
                –†–µ–≥–∏–æ–Ω –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≤—Ç–æ
              </label>
              <input
                type="text"
                id="carRegion"
                placeholder="–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫, –¥—Ä—É–≥–æ–π"
              />
            </div>
            <div class="field-group">
              <label for="carPhone">
                –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏
              </label>
              <input
                type="text"
                id="carPhone"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: +7 999 123-45-67"
              />
            </div>
          </div>

          <div class="field-group">
            <label for="carBudget">
              –ë—é–¥–∂–µ—Ç, ‚ÇΩ
            </label>
            <input
              type="text"
              id="carBudget"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –¥–æ 3 500 000 ‚ÇΩ"
            />
          </div>

          <div class="field-group">
            <label for="carComment">
              –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (VIN, –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è, —Ü–≤–µ—Ç)
            </label>
            <textarea
              id="carComment"
              placeholder="–ù–∞–ø–∏—à–∏—Ç–µ VIN (–µ—Å–ª–∏ –µ—Å—Ç—å), –∂–µ–ª–∞–µ–º—É—é –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—é, —Ü–≤–µ—Ç, —Å—Ä–æ–∫–∏‚Ä¶"
            ></textarea>
            <div class="hint">
              –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –∏–ª–∏ —É–¥–æ–±–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Å–≤—è–∑–∏ ‚Äî –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ Telegram –∏–ª–∏ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É.
            </div>
          </div>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞: –ê–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–∏ (–≤—Å—ë –ù–ï–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –≤–º–µ—Å—Ç–æ –±—é–¥–∂–µ—Ç–∞ ‚Äî —Ç–µ–ª–µ—Ñ–æ–Ω) -->
        <div class="tab-panel" id="tab-parts">
          <div class="field-group">
            <label for="partsBrand">
              –ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ
            </label>
            <input
              type="text"
              id="partsBrand"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Kia Carnival 2.2D, Hyundai Solaris"
            />
          </div>

          <div class="two-cols">
            <div class="field-group">
              <label for="partsYear">
                –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞
              </label>
              <input
                type="text"
                id="partsYear"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 2018"
              />
            </div>
            <div class="field-group">
              <label for="partsVin">
                VIN (–µ—Å–ª–∏ –µ—Å—Ç—å)
              </label>
              <input
                type="text"
                id="partsVin"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: XW8ZZZ..."
              />
            </div>
          </div>

          <div class="field-group">
            <label for="partsNeed">
              –ß—Ç–æ –Ω—É–∂–Ω–æ (–Ω–∞–∑–≤–∞–Ω–∏–µ –∑–∞–ø—á–∞—Å—Ç–∏ / —É–∑–ª–∞)
            </label>
            <input
              type="text"
              id="partsNeed"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–µ—Ä–µ–¥–Ω–∏–π –±–∞–º–ø–µ—Ä, –ª–µ–≤–∞—è —Ñ–∞—Ä–∞, –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–π –¥–≤–∏–≥–∞—Ç–µ–ª—å"
            />
          </div>

          <div class="field-group">
            <label for="partsNumber">
              –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä / –∞—Ä—Ç–∏–∫—É–ª (–µ—Å–ª–∏ –µ—Å—Ç—å)
            </label>
            <input
              type="text"
              id="partsNumber"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 92101-S000, 28113-5H000"
            />
          </div>

          <div class="two-cols">
            <div class="field-group">
              <label for="partsRegion">
                –†–µ–≥–∏–æ–Ω / –≥–æ—Ä–æ–¥ –¥–æ—Å—Ç–∞–≤–∫–∏
              </label>
              <input
                type="text"
                id="partsRegion"
                placeholder="–ú–æ—Å–∫–≤–∞, –ö—Ä–∞—Å–Ω–æ–¥–∞—Ä, –í–ª–∞–¥–∏–≤–æ—Å—Ç–æ–∫, –¥—Ä—É–≥–æ–π"
              />
            </div>
            <div class="field-group">
              <label for="partsPhone">
                –¢–µ–ª–µ—Ñ–æ–Ω –¥–ª—è —Å–≤—è–∑–∏
              </label>
              <input
                type="text"
                id="partsPhone"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: +7 999 123-45-67"
              />
            </div>
          </div>

          <div class="field-group">
            <label for="partsComment">
              –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (—Ñ–æ—Ç–æ, —Å—Ä–æ—á–Ω–æ—Å—Ç—å, –ø–æ–∂–µ–ª–∞–Ω–∏—è)
            </label>
            <textarea
              id="partsComment"
              placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –≤—Å—ë, —á—Ç–æ –≤–∞–∂–Ω–æ: —Å—Ç–æ—Ä–æ–Ω–∞, —Ü–≤–µ—Ç, –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ç–æ –¥–µ—Ç–∞–ª–∏, —Å—Ä–æ—á–Ω–æ—Å—Ç—å‚Ä¶"
            ></textarea>
            <div class="hint">
              –§–æ—Ç–æ –¥–µ—Ç–∞–ª–∏ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø—Ä–∏—Å–ª–∞—Ç—å —É–∂–µ –≤ –¥–∏–∞–ª–æ–≥–µ —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º.
            </div>
          </div>
        </div>

        <button type="submit" class="btn">
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å
        </button>

        <div id="formMessage" class="form-message"></div>
      </form>

      <p class="footnote">
        –û—Ç–ø—Ä–∞–≤–ª—è—è –∑–∞—è–≤–∫—É, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–∞—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏–ª–∏ –∑–∞–ø—á–∞—Å—Ç–µ–π –∏ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.  
        –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
      </p>
    </main>
  </div>

  <script>
    const tg = window.Telegram?.WebApp;
    if (tg) {
      tg.expand();
      tg.ready();
    }

    const BOT_USERNAME = "abazaprosecbot";

    // –¢–∞–±—ã
    let activeTab = "car";
    const tabButtons = document.querySelectorAll(".tab");
    const tabPanels = {
      car: document.getElementById("tab-car"),
      parts: document.getElementById("tab-parts"),
    };

    const form = document.getElementById("leadForm");
    const formMessage = document.getElementById("formMessage");

    tabButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        const tab = btn.dataset.tab;
        if (tab === activeTab) return;

        activeTab = tab;
        tabButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");

        Object.keys(tabPanels).forEach((key) => {
          tabPanels[key].classList.toggle("active", key === activeTab);
        });

        formMessage.textContent = "";
        formMessage.classList.remove("error");
      });
    });

    // –¢–æ–ø–ª–∏–≤–æ ‚Äî –≤—ã–±–æ—Ä
    let selectedFuel = "–î–∏–∑–µ–ª—å";
    const fuelButtons = document.querySelectorAll(".fuel-chip");

    fuelButtons.forEach((btn) => {
      btn.addEventListener("click", () => {
        fuelButtons.forEach((b) => b.classList.remove("active"));
        btn.classList.add("active");
        selectedFuel = btn.dataset.fuel;
      });
    });

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      formMessage.textContent = "";
      formMessage.classList.remove("error");

      if (activeTab === "car") {
        await handleCarSubmit();
      } else {
        await handlePartsSubmit();
      }
    });

    // –í–∫–ª–∞–¥–∫–∞ "–ü–æ–¥–±–æ—Ä –∞–≤—Ç–æ" ‚Äî –≤—Å—ë –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
    async function handleCarSubmit() {
      const brand = document.getElementById("carBrand").value.trim();
      const year = document.getElementById("carYear").value.trim();
      const mileage = document.getElementById("carMileage").value.trim();
      const region = document.getElementById("carRegion").value.trim();
      const phone = document.getElementById("carPhone").value.trim();
      const budget = document.getElementById("carBudget").value.trim();
      const comment = document.getElementById("carComment").value.trim();

      if (!brand && !year && !mileage && !region && !phone && !budget && !comment) {
        formMessage.textContent =
          "–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏ –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É, –Ω–æ –ª—É—á—à–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ üòä";
      }

      const payload = {
        source: "miniapp_avtobaza_form_car",
        type: "car",
        brand,
        year,
        mileage,
        fuel: selectedFuel,
        region,
        phone,
        budget,
        comment,
        createdAt: new Date().toISOString(),
      };

      const textPreview =
        "–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä –∞–≤—Ç–æ–º–æ–±–∏–ª—è –∏–∑ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:\n\n" +
        (brand ? `–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å: ${brand}\n` : "") +
        (year ? `–ì–æ–¥: ${year}\n` : "") +
        (mileage ? `–ü—Ä–æ–±–µ–≥: ${mileage}\n` : "") +
        `–¢–æ–ø–ª–∏–≤–æ: ${selectedFuel}\n` +
        (region ? `–†–µ–≥–∏–æ–Ω –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≤—Ç–æ: ${region}\n` : "") +
        (budget ? `–ë—é–¥–∂–µ—Ç: ${budget}\n` : "") +
        (phone ? `–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` : "") +
        (comment ? `–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${comment}\n` : "");

      await sendPayload(
        payload,
        textPreview || "–ó–∞—è–≤–∫–∞ –Ω–∞ –ø–æ–¥–±–æ—Ä –∞–≤—Ç–æ (–∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª –ø–æ–ª—è)."
      );
    }

    // –í–∫–ª–∞–¥–∫–∞ "–ê–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–∏" ‚Äî –≤—Å—ë –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –±—é–¥–∂–µ—Ç –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω
    async function handlePartsSubmit() {
      const brand = document.getElementById("partsBrand").value.trim();
      const year = document.getElementById("partsYear").value.trim();
      const vin = document.getElementById("partsVin").value.trim();
      const need = document.getElementById("partsNeed").value.trim();
      const number = document.getElementById("partsNumber").value.trim();
      const region = document.getElementById("partsRegion").value.trim();
      const phone = document.getElementById("partsPhone").value.trim();
      const comment = document.getElementById("partsComment").value.trim();

      if (
        !brand &&
        !year &&
        !vin &&
        !need &&
        !number &&
        !region &&
        !phone &&
        !comment
      ) {
        formMessage.textContent =
          "–í—ã –º–æ–∂–µ—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏ –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É, –Ω–æ –¥–ª—è –ø–æ–¥–±–æ—Ä–∞ –∑–∞–ø—á–∞—Å—Ç–µ–π –ª—É—á—à–µ —É–∫–∞–∑–∞—Ç—å —Ö–æ—Ç—è –±—ã –º–∞—Ä–∫—É –∞–≤—Ç–æ –∏–ª–∏ —á—Ç–æ –Ω—É–∂–Ω–æ üòä";
      }

      const payload = {
        source: "miniapp_avtobaza_form_parts",
        type: "parts",
        brand,
        year,
        vin,
        need,
        number,
        region,
        phone,
        comment,
        createdAt: new Date().toISOString(),
      };

      const textPreview =
        "–ó–∞—è–≤–∫–∞ –Ω–∞ –∞–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–∏ –∏–∑ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:\n\n" +
        (brand ? `–ú–∞—Ä–∫–∞ –∏ –º–æ–¥–µ–ª—å –∞–≤—Ç–æ: ${brand}\n` : "") +
        (year ? `–ì–æ–¥: ${year}\n` : "") +
        (vin ? `VIN: ${vin}\n` : "") +
        (need ? `–ß—Ç–æ –Ω—É–∂–Ω–æ: ${need}\n` : "") +
        (number ? `–ù–æ–º–µ—Ä –¥–µ—Ç–∞–ª–∏ / –∞—Ä—Ç–∏–∫—É–ª: ${number}\n` : "") +
        (region ? `–†–µ–≥–∏–æ–Ω / –≥–æ—Ä–æ–¥: ${region}\n` : "") +
        (phone ? `–¢–µ–ª–µ—Ñ–æ–Ω: ${phone}\n` : "") +
        (comment ? `–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: ${comment}\n` : "");

      await sendPayload(
        payload,
        textPreview || "–ó–∞—è–≤–∫–∞ –Ω–∞ –∞–≤—Ç–æ –∑–∞–ø—á–∞—Å—Ç–∏ (–∫–ª–∏–µ–Ω—Ç –Ω–µ –∑–∞–ø–æ–ª–Ω–∏–ª –ø–æ–ª—è)."
      );
    }

    // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å @abazaprosecbot –∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∑–∞—è–≤–∫–∏ –∫–∞–∫ —á–µ—Ä–Ω–æ–≤–∏–∫
    async function sendPayload(payload, textPreview) {
      try {
        const deepLink =
          "https://t.me/" +
          BOT_USERNAME +
          "?text=" +
          encodeURIComponent(textPreview);

        window.location.href = deepLink;

        formMessage.textContent =
          "–ú—ã –æ—Ç–∫—Ä—ã–ª–∏ —á–∞—Ç —Å @" +
          BOT_USERNAME +
          ". –ó–∞—è–≤–∫–∞ —É–∂–µ –≤—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ ‚Äî –æ—Å—Ç–∞–ª–æ—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞–∂–∞—Ç—å ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª.";

        form.reset();

        // —Å–±—Ä–æ—Å —Ç–æ–ø–ª–∏–≤–∞ –Ω–∞ –¥–µ—Ñ–æ–ª—Ç
        selectedFuel = "–î–∏–∑–µ–ª—å";
        fuelButtons.forEach((b) => b.classList.remove("active"));
        const firstFuel = document.querySelector(
          '.fuel-chip[data-fuel="–î–∏–∑–µ–ª—å"]'
        );
        if (firstFuel) firstFuel.classList.add("active");
      } catch (err) {
        console.error(err);
        formMessage.textContent =
          "–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–∫—Ä—ã—Ç—å —á–∞—Ç. –û—Ç–∫—Ä–æ–π—Ç–µ @abazaprosecbot –≤—Ä—É—á–Ω—É—é –∏ –Ω–∞–ø–∏—à–∏—Ç–µ –∑–∞—è–≤–∫—É –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ.";
        formMessage.classList.add("error");
      }
    }
  </script>
</body>
</html>
